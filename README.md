# pulumicost-spec

Canonical protocol and schemas for PulumiCost plugins.

## Suggested layout
```text
pulumicost-spec/
├─ README.md
├─ LICENSE
├─ buf.yaml
├─ buf.gen.yaml
├─ go.mod
├─ proto/
│  └─ pulumicost/
│     └─ costsource.proto
├─ schemas/
│  └─ pricing_spec.schema.json
├─ sdk/
│  └─ go/
│     ├─ proto/                # generated by buf/protoc (do not hand-edit)
│     └─ types/                # hand-written helpers/types around the proto
│        ├─ domain.go
│        ├─ validate.go
│        └─ README.md
├─ examples/
│  ├─ specs/
│  │  ├─ aws-ec2-t3-micro.yaml
│  │  └─ kubecost-gke-node.yaml
│  └─ requests/
│     ├─ actual-cost-namespace.json
│     └─ projected-cost-ec2.json
└─ Makefile
```

## Contents
- `proto/pulumicost/costsource.proto` — gRPC service and messages
- `schemas/pricing_spec.schema.json` — validation for PricingSpec documents
- `sdk/go/proto` — generated Go bindings (via buf/protoc)
- `sdk/go/types` — hand-written helpers around the proto
- `examples/` — sample specs and request payloads

## Generate
- Install buf: https://docs.buf.build/installation
- `make generate`

## Go module
`go get github.com/rshade/pulumicost-spec/sdk/go/proto`

## Versioning
- Follow semver for proto changes; breaking changes bump MAJOR.
- Tag releases like `v0.1.0`.

## Contributing
- Run `buf lint` and `buf breaking` before PRs.
